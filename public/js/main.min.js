document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".navbar"),t=document.querySelector(".navbar-toggle"),o=document.querySelector(".navbar-menu"),n=document.querySelectorAll(".navbar-menu a");window.addEventListener("scroll",function(){window.scrollY>50?e?.classList.add("scrolled"):e?.classList.remove("scrolled")}),t?.addEventListener("click",function(){o?.classList.toggle("active"),this.innerHTML=o?.classList.contains("active")?'<i class="fas fa-times"></i>':'<i class="fas fa-bars"></i>'}),const dd=document.querySelector(".navbar-dropdown");if(dd){const ddl=dd.querySelector(":scope > a");ddl?.addEventListener("click",function(ev){window.innerWidth<=768&&(ev.preventDefault(),dd.classList.toggle("open"))})}n.forEach(e=>{e.addEventListener("click",function(){window.innerWidth<=768&&(o?.classList.remove("active"),t&&(t.innerHTML='<i class="fas fa-bars"></i>'))})});const r=window.location.pathname;n.forEach(e=>{e.getAttribute("href")===r&&e.classList.add("active")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"!==t){e.preventDefault();const o=document.querySelector(t);if(o){const e=o.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"})}}})});const c=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("fade-in"),c.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".card, .service-card, .project-card, .pricing-card, .testimonial-card").forEach(e=>{c.observe(e)});const s=document.querySelector("#contact-form");if(s){s.addEventListener("submit",function(e){const t=s.querySelectorAll("[required]");let o=!0;t.forEach(e=>{const t=e.parentElement.querySelector(".form-error");e.value.trim()?(e.classList.remove("error"),t&&(t.style.display="none")):(o=!1,e.classList.add("error"),t&&(t.style.display="block"))});const n=s.querySelector('input[type="email"]');if(n&&n.value){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value)){o=!1,n.classList.add("error");const e=n.parentElement.querySelector(".form-error");e&&(e.textContent="Veuillez entrer une adresse email valide",e.style.display="block")}}if(!o){e.preventDefault();const t=s.querySelector(".error");t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus())}});s.querySelectorAll(".form-control").forEach(e=>{e.addEventListener("input",function(){this.classList.remove("error");const e=this.parentElement.querySelector(".form-error");e&&(e.style.display="none")})})}const i=document.createElement("button");i.innerHTML='<i class="fas fa-arrow-up"></i>',i.className="scroll-top-btn",i.setAttribute("aria-label","Retour en haut"),document.body.appendChild(i);const a=document.createElement("style");a.textContent="\n        .scroll-top-btn {\n            position: fixed;\n            bottom: 30px;\n            right: 30px;\n            width: 50px;\n            height: 50px;\n            background-color: var(--accent-color, #FF6B35);\n            color: white;\n            border: none;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1.2rem;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            opacity: 0;\n            visibility: hidden;\n            transition: all 0.3s ease;\n            z-index: 999;\n        }\n        .scroll-top-btn.visible {\n            opacity: 1;\n            visibility: visible;\n        }\n        .scroll-top-btn:hover {\n            background-color: var(--accent-dark, #e65520);\n            transform: translateY(-3px);\n            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n        }\n    ",document.head.appendChild(a),window.addEventListener("scroll",function(){window.scrollY>300?i.classList.add("visible"):i.classList.remove("visible")}),i.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});const l=window.location.pathname.includes("/mentions-legales")||window.location.pathname.includes("/politique-de-confidentialite")||window.location.pathname.includes("/cgv"),d=window.location.pathname.includes("/portfolio");if(!l&&!d){document.querySelectorAll(".card, .service-card").forEach(e=>{e.addEventListener("mousemove",function(t){const o=e.getBoundingClientRect(),n=t.clientX-o.left,r=t.clientY-o.top,c=o.width/2,s=(r-o.height/2)/150,i=(c-n)/150;e.style.transform=`perspective(1000px) rotateX(${s}deg) rotateY(${i}deg) translateY(-2px)`}),e.addEventListener("mouseleave",function(){e.style.transform="perspective(1000px) rotateX(0) rotateY(0) translateY(0)"})})}document.querySelectorAll(".counter").forEach(e=>{const t=parseInt(e.getAttribute("data-target")),o=t/125;let n=0;const r=()=>{n+=o,n<t?(e.textContent=String(Math.floor(n)),requestAnimationFrame(r)):e.textContent=String(t)},c=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(r(),c.unobserve(e.target))})},{threshold:.5});c.observe(e)});const u=document.querySelectorAll(".filter-btn"),m=document.querySelectorAll(".project-card");u.forEach(e=>{e.addEventListener("click",function(){u.forEach(e=>e.classList.remove("active")),this.classList.add("active");const e=this.getAttribute("data-filter");m.forEach(t=>{"all"===e||t.getAttribute("data-category")===e?(t.style.display="block",setTimeout(()=>{t.style.opacity="1",t.style.transform="scale(1)"},10)):(t.style.opacity="0",t.style.transform="scale(0.8)",setTimeout(()=>{t.style.display="none"},300))})})});if(document.querySelectorAll(".flash-message").forEach(e=>{setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},300)},5e3);const t=e.querySelector(".flash-close");t&&t.addEventListener("click",()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},300)})}),"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const o=t.target;o.dataset.src&&(o.src=o.dataset.src,o.classList.add("loaded"),e.unobserve(o))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}if(document.querySelectorAll(".accordion-header").forEach(e=>{e.addEventListener("click",function(){const e=this.parentElement,t=e.querySelector(".accordion-content"),o=e.classList.contains("active");document.querySelectorAll(".accordion-item").forEach(e=>{e.classList.remove("active"),e.querySelector(".accordion-content").style.maxHeight=null}),o||(e.classList.add("active"),t.style.maxHeight=t.scrollHeight+"px")})}),s){const e=document.createElement("input");e.type="text",e.name="website",e.style.display="none",e.tabIndex=-1,e.autocomplete="off",s.appendChild(e),s.addEventListener("submit",function(t){e.value&&(t.preventDefault(),console.log("Spam détecté"))})}});